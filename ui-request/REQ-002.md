# REQ-002: SegmentedControl

## 概要
- **種別**: CSS Class
- **優先度**: High
- **依頼元**: openground-ec

## 既存チェック
- **既存コンポーネント**: `Tabs` (variant: 'pill' | 'underline') — pill は個別ボタンの並びで、背景囲みのセグメント型ではない
- **既存CSSクラス**: `.pill-filter` / `.pill-filter-active` — 個別ピルボタン。コンテナ内でアクティブが切り替わるセグメントUIではない
- **既存トークン**: `var(--selected-bg)`, `var(--selected-text)` は流用可能
- **判定**: 新規作成が必要

> pill-filter は独立したフィルターボタンの並び。セグメントコントロールはコンテナ背景を持ち、その中でアクティブアイテムが切り替わる iOS 風の UI。用途が異なる。

## 何が必要か
ヘッダー内の EC / MGT モード切り替えのような、コンパクトなセグメントコントロール。現状ハードコードで実装しているが、デザインシステムとして統一されたクラスが必要。

## 仕様

### ビジュアル仕様
```
┌─────────────────────────┐  ← コンテナ（bg-white/[0.04] + border）
│ ┌───────┐               │
│ │  EC   │    MGT        │  ← アクティブ項目は白背景 + 黒文字
│ └───────┘               │
└─────────────────────────┘

┌─────────────────────────┐
│               ┌───────┐ │
│    EC         │  MGT  │ │  ← 切り替え後
│               └───────┘ │
└─────────────────────────┘
```

### CSS クラス定義

```css
/* コンテナ */
.segmented-control {
  display: inline-flex;
  align-items: center;
  gap: 2px;
  padding: 2px;
  background: var(--p-white-4);        /* rgba(255,255,255,0.04) */
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-full);
}

/* 各セグメント項目 */
.segmented-control-item {
  padding: 4px 12px;
  font-size: 11px;
  font-weight: 600;
  letter-spacing: 0.05em;
  color: var(--text-muted);
  border-radius: var(--radius-full);
  cursor: pointer;
  transition: all var(--transition-fast);
  background: transparent;
  border: none;
}

/* Hover */
.segmented-control-item:hover:not(:disabled):not(.segmented-control-active) {
  color: var(--text-secondary);
}

/* Active / Selected */
.segmented-control-active {
  background: var(--selected-bg);      /* #fff (dark) */
  color: var(--selected-text);         /* #000 (dark) */
}

.segmented-control-active:hover {
  background: var(--selected-hover-bg);
}

/* Disabled */
.segmented-control-item:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

/* Focus */
.segmented-control-item:focus-visible {
  outline: 2px solid var(--text-primary);
  outline-offset: 2px;
}
```

**状態** (5状態ルール):
| 状態 | background | color | border | その他 |
|------|------------|-------|--------|--------|
| Default | transparent | `var(--text-muted)` | — | — |
| Hover | transparent | `var(--text-secondary)` | — | — |
| Active/Selected | `var(--selected-bg)` | `var(--selected-text)` | — | — |
| Disabled | transparent | `var(--text-muted)` | — | opacity: 0.3 |
| Focus | transparent | — | — | outline: 2px solid |

### デザイントークン
- コンテナ背景: `var(--p-white-4)` (既存)
- コンテナボーダー: `var(--border-subtle)` (既存)
- アクティブ背景: `var(--selected-bg)` (既存)
- アクティブ文字: `var(--selected-text)` (既存)
- 非アクティブ文字: `var(--text-muted)` (既存)
- 角丸: `var(--radius-full)` (既存)

### レスポンシブ
- Desktop / Mobile 共通: インラインサイズなのでレスポンシブ対応不要

## 使用例
```html
<!-- CSS のみ（Link タグ等と組み合わせ） -->
<div class="segmented-control">
  <a href="/admin" class="segmented-control-item segmented-control-active">EC</a>
  <a href="/admin/management" class="segmented-control-item">MGT</a>
</div>

<!-- 3項目以上も可 -->
<div class="segmented-control">
  <button class="segmented-control-item segmented-control-active">Day</button>
  <button class="segmented-control-item">Week</button>
  <button class="segmented-control-item">Month</button>
</div>
```

## 参考
- 類似の既存クラス: `.pill-filter` — 個別ボタン版。セグメントはコンテナ囲み版
- インスピレーション: iOS UISegmentedControl, shadcn/ui Tabs (inline variant)

## 受入基準
- [x] CSS クラスのみで動作（JS 不要）
- [x] ダーク/ライト両テーマ対応
- [x] 5状態(Default/Hover/Active/Disabled/Focus)実装
- [x] 2項目〜4項目で使用可能
- [x] カタログに追加

## 完了

- **実装日**: 2026-02-27
- **実装バージョン**: 次回リリースに含まれる
- **実装ファイル**:
  - `src/css/tokens.css` (`.segmented-control` / `.segmented-control-item` / `.segmented-control-active` クラス追加)
  - `catalog/pages/ComponentsPage.tsx` (CSS Components セクションにデモ追加)
